# エスコフィエ『ル・ギード・キュリネール』新訳作業用リポジトリ #



## 「チラ見」ファイルのダウンロード ##

「チラ見」用のPDFは<>code の最上位ディレクトリにあります。ファイル名は Le-Gide-Culinaire.pdf です。拡張子の前に日付が付いているものは古いバージョンです。ブラウザ上で直接開けるみたいですが、動作がとても遅いかも。

## 編集協力の方法 ##

Markdownファイル（.md）が作業ファイル=原稿です。

[**Pandoc Extended Markdown**](https://pandoc.org/MANUAL.html#pandocs-markdown)いう書式を用いており（[**日本語版はこのリンクの上から1/3くらいのところ**](http://sky-y.github.io/site-pandoc-jp/users-guide/)、ただし内容が古いので出来るだけ英語版を参照してください）、このサービスで標準とされている Github Flavored Markdown に準拠していない部分があるため、ブラウザ上でのプレビューは正しく表示されないことがほとんどです。

原稿そのものを適切にプレビューするには、Pandoc Extended Markdown に対応したエディタが必要です。（Atomいうエディタに追加パッケージで対応するものがあったと思います）。

**編集協力者は、番号（=章番号）で始まるディレクトリ内のMarkdownファイルに対してのみ編集してコミットするようにしてください**。（以下にファイル名を列挙しておきます）

命名規則は

章番号-節番号-ppページ範囲.md

* 00-avant-propos/00-avant-propos.md
* 01-sauces/01-01-pp1-12.md
* 01-sauces/01-02-pp13-17.md

**これらのファイルに対してだけ変更をコミットしてください。**


PDFは適時マージされます。単に組版イメージ確認のためであり、「チラ見」用です。

それ以外のファイル（TeX関連が主です）は、Lualatex を分る方以外は触らないようにご注意ください。目まいがするか、頭が痛くなっても責任は負えません。

原稿ファイル（.md）には時折\{\#fonds-blanc-volaille\} のようなものが見出しにありますが、これはPDFやHTML、EPUBで内部リンクを張るための「ラベル」です。原書の項目名を、すべて小文字」にしてアクサンなし、ハイフンでつないでいます。


### Markdownファイル=原稿はブラウザ上で作業可能です ###

ブラウザでこのリポジトリを開き、ソース>目的の章のディレクトリ>作業ファイル、と進んでください。

.md ファイルをクリックして開くとMarkdownのプレビューモードで表示されます。右上にある「編集」=鉛筆のマークをクリックして編集モードに移行します。間違ってもその隣の「ゴミ箱」をクリックしないでください。

この状態で**誤字、脱字、明らかなミスについては直接書き込んでください**。その後、

1. 上のほうにある Preview Changes を押して変更内容を確認します。環境によってはちょっと待たされることがあります。
2. OKであれば、スクロールして下の方にある Create a new branch for this commit and start a pull request. の左のラジオボタンが選択されていることを確認し、上のコメント覧に変更内容等を書いてください。
3. 大きなボタン Commit Changes を押します。
4. 画面が変わり、Create a Pull Request なんたらという表示が出るので、再確認ボタンを押すと「プルリクエスト」が作成されたことになります。この時点ではこのリポジトリのファイルに変更は加えられていません。要するに「変更の提案」ということです。このときにコメント欄があります。これが主な議論の場となりますので活用してください。
5. プルリクエストがあると、僕が変更内容を確認し、妥当と判断すればマージ（ファイルに取り込むこと）します。

#### ローカルルール #####

* 数字は一桁のものも半角数字を用いてください（全角は用いないでください）。前後にスペースを入れる必要はありません（とりわけ禁則文字、役物の一部が自動処理されずに問題が発生することが確認されました）。
* ただし、単位を表す ml, dl, L, g, kg, mm, cm なども半角文字を使いますが、半角数字の直後には半角スペースを挟んでください。（例） ワイン1 dl、

これらはTeXで処理する際に、自動的に適当に文字間を調整して表示されます。

#### TeX命令文が含まれています ###

基本的に、TeXという組版プログラム群を使う前提の md ファイルです。そのため、markdown の書式ではないTeX命令の行がしばしばあり、プレビュー状態でも表示されてしまいます。

\index{そーす@ソース!しょふろわちゃいろ@---・ショーフロワ(茶色)}
\index{しょふろわ@ショーフロワ!そーす(ちゃいろ)@ソース・--- (茶色)}
\index{sauce@sauce!chaud-froid brune@--- Chaud-froid brune}
\index{chaud-froid@chaud-froid!sauce brune@Sauce --- brune}

あるいは

\newpage

あるいは

文章\ruby{漢字}{ふりがな}

など。


##### レシピ名の前アキ指定もTeX書式が入っています #####

レシピの日本語名の前に、ほとんどの場合、

\maeaki

が入っています。レシピ名と前の段落との間隔の指定です。


##### 分数の表示もTeX表記にしました #####

$\sfrac{1}{2}$ ……1/2のこと

$\sfrac{分子}{分母}$ ということです。

バックスラッシュ\や$で始まるこれらの表現には触れないようにしてください。お願いします。

#### 編集コメント ####

短かいコメントは**文中**、少し長いなら、該当段落の下にカラ行を多めに入れてあるので、そこに、

\[\](コメント)

として書いてください。\[と\]の間はスペースなし。**半角記号**です。カッコも必ず**半角**にしてください。多少長くなっても大丈夫ですが、余分な改行は入れないほうがdiffが見やすいので、改行しないようお願いします。

編集モードでこの行の下を見るとコメントの実例が見られます。
[](これはコメントの例です)

このようにして書いたコメントは「プレビュー」モードで表示されなくなりますが、編集モードとdiff表示において表示されます。

長いコメントは、コミットする際（後述）にコメント欄がありますので、そこでも大丈夫です。


### コミット ###

とても**大事なこと**なので2度書きます。

ブラウザ上で編集した場合、作業後に

1. 上のほうにある Preview Changes を押して変更内容を確認します。環境によってはちょっと待たされることがあります。
2. OKであれば、スクロールして下の方にある Create a new branch for this commit and start a pull request. の左のラジオボタンが選択されていることを確認し、上のコメント覧に変更内容等を書いてください。
3. 大きなボタン Commit Changes を押します。
4. 画面が変わり、Create a Pull Request なんたらという表示が出るので、再確認ボタンを押すと「プルリクエスト」が作成されたことになります。この時点ではこのリポジトリのファイルに変更は加えられていません。要するに「変更の提案」ということです。このときにコメント欄があります。これが主な議論の場となりますので活用してください。
5. プルリクエストがあると、僕が変更内容を確認し、妥当と判断すればマージ（ファイルに取り込むこと）します。

### Markdownプレビューモードでの注番号について ###

Githubでのプレビューモードでは、注が正しく表示されません。ダウンロードしてMarkdown対応エディタのプレビューを使うか、pandocで適宜変換してください。


### ブラウザ上で編集する際の注意 ###

ブラウザ上で編集する場合、「コミット」が完了するまで変更した内容が保存されません。僕はよくやってしまうのですが、誤ってページのリロード、バックなどしてしまうと、それまでの編集内容が全て失なわれてしまいます。

そのため、多少煩雑になっても、1ファイルまとめて全部徹底的に、ではなく、数回に分けて編集、コミットするほうが安全です。

あるいは、エディタにコピペして作業し、それを戻していただいても結構ですが、その場合は、**余計な空白行などが入らない**ようご注意ください。Diffによる変更点の比較がうまくいかなくなりますので。

もっとも、エディタで作業できるのであれば、Githubアプリをお使いいただくほうが便利だと思います。

### 見出しの階層 ###

* \# 章(ソース、ガルニチュール etc）
* \#\# 節（基本ソース、茶色い派生ソース etc.）
* \#\#\# 節のフランス語表記
* \#\#\#\# レシピ名
* \#\#\#\#\# レシピ名のフランス語表記
* \#\#\#\#\#\# さらにその下のもの（原注など）


<br />
<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="クリエイティブ・コモンズ・ライセンス" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />この 作品 は <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">クリエイティブ・コモンズ 表示 - 継承 4.0 国際 ライセンス</a>の下に提供されています。
